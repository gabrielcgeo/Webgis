<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIMA Detalhado - Projeto Hidrelétrico Rio Forte</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <style>
        /* --- CONFIGURAÇÕES GLOBAIS --- */
        :root {
            --bg-main: #fcfcfc;
            --nav-bg: #2c3e50;
            --text-dark: #34495e;
            --text-light: #ecf0f1;
            --primary-accent: #2980b9; /* Um azul mais sóbrio */
            --border-color: #e0e0e0;
            --font-heading: 'Lato', sans-serif;
            --font-body: 'Noto Serif', serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-body);
            color: var(--text-dark);
            background-color: var(--bg-main);
            line-height: 1.8;
            -webkit-font-smoothing: antialiased;
        }

        /* --- ESTRUTURA PRINCIPAL --- */
        .report-container { display: flex; }

        /* --- PAINEL DE NAVEGAÇÃO HIERÁRQUICO --- */
        .sidebar-nav {
            width: 320px;
            background-color: var(--nav-bg);
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            padding: 25px 0;
            flex-shrink: 0;
            position: sticky;
            top: 0;
            height: 100vh;
        }
        .report-title {
            padding: 0 20px 20px 20px;
            border-bottom: 1px solid rgba(236, 240, 241, 0.2);
        }
        .report-title h2 { font-family: var(--font-heading); font-weight: 900; font-size: 2.2rem; }
        .report-title p { font-size: 0.9rem; color: var(--border-color); opacity: 0.8; }
        
        .table-of-contents { list-style: none; flex-grow: 1; overflow-y: auto; padding: 10px 0; }
        
        .chapter-item > a {
            display: block;
            color: var(--text-light);
            text-decoration: none;
            padding: 12px 20px;
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 1.1rem;
            transition: background-color 0.2s ease;
        }
        .chapter-item > a:hover { background-color: rgba(255, 255, 255, 0.05); }
        .chapter-item > a.active { color: white; background-color: var(--primary-accent); }

        .subchapter-list {
            list-style: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
            background-color: rgba(0,0,0,0.2);
        }
        .chapter-item.open .subchapter-list { max-height: 1000px; /* Valor alto para permitir expansão */ }

        .subchapter-item a {
            display: block;
            color: var(--text-light);
            text-decoration: none;
            padding: 10px 20px 10px 40px; /* Indentação */
            font-size: 0.95rem;
            position: relative;
            transition: background-color 0.2s ease;
        }
        .subchapter-item a:before { /* Linha de indentação */
            content: '';
            position: absolute;
            left: 25px;
            top: 0;
            bottom: 0;
            width: 1px;
            background-color: rgba(236, 240, 241, 0.2);
        }
        .subchapter-item a:hover { background-color: rgba(255, 255, 255, 0.1); }
        .subchapter-item a.active { font-weight: bold; color: white; background-color: rgba(41, 128, 185, 0.5); }


        /* --- ÁREA DE CONTEÚDO --- */
        .content-area { flex-grow: 1; padding: 40px 60px; }
        .chapter-block { margin-bottom: 80px; }
        .subchapter-block { padding-top: 40px; margin-bottom: 40px; border-top: 1px solid #eee; }
        
        .chapter-title {
            font-family: var(--font-heading);
            font-size: 2.8rem;
            font-weight: 900;
            color: var(--nav-bg);
            margin-bottom: 20px;
        }
        .subchapter-title {
            font-family: var(--font-heading);
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--text-dark);
        }
        p { margin-bottom: 1.2em; max-width: 800px; }
        
        /* --- ELEMENTOS DE MÍDIA --- */
        .media-container, .leaflet-map {
            margin: 30px auto;
            border-radius: 8px;
            box-shadow: 0 5px 25px rgba(44, 62, 80, 0.15);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }
        .leaflet-map { height: 500px; width: 100%; }
        .media-container img { width: 100%; display: block; }

        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* Proporção 16:9 */
            height: 0;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .doc-link {
            display: inline-block;
            background-color: var(--primary-accent);
            color: white;
            padding: 12px 25px;
            border-radius: 5px;
            text-decoration: none;
            font-family: var(--font-heading);
            font-weight: bold;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .doc-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(41, 128, 185, 0.4);
        }

        /* --- RESPONSIVIDADE --- */
        @media (max-width: 1200px) {
            .content-area { padding: 30px 40px; }
            .sidebar-nav { width: 280px; }
        }
        @media (max-width: 992px) {
            .report-container { flex-direction: column; }
            .sidebar-nav { width: 100%; height: auto; position: static; }
            .table-of-contents { display: flex; overflow-x: auto; padding: 5px; border-bottom: 2px solid var(--primary-accent); }
            .table-of-contents .chapter-item { flex-shrink: 0; }
            .subchapter-list { position: absolute; background-color: var(--nav-bg); z-index: 100; box-shadow: 0 5px 10px black; }
        }
    </style>
</head>
<body>
    <div class="report-container">
        <nav class="sidebar-nav">
            <div class="report-title">
                <h2>RIMA</h2>
                <p>Projeto Hidrelétrico Rio Forte</p>
            </div>
            <ul class="table-of-contents">
                <li class="chapter-item" data-chapter="chapter-1">
                    <a href="#chapter-1">1. Introdução</a>
                    <ul class="subchapter-list">
                        <li class="subchapter-item"><a href="#sub-1-1" data-target="sub-1-1">1.1 Caracterização</a></li>
                    </ul>
                </li>
                <li class="chapter-item" data-chapter="chapter-2">
                    <a href="#chapter-2">2. Meio Físico</a>
                    <ul class="subchapter-list">
                        <li class="subchapter-item"><a href="#sub-2-2" data-target="sub-2-2">2.2 Geologia</a></li>
                        <li class="subchapter-item"><a href="#sub-2-3" data-target="sub-2-3">2.3 Geomorfologia</a></li>
                        <li class="subchapter-item"><a href="#sub-2-4" data-target="sub-2-4">2.4 Recursos Hídricos</a></li>
                    </ul>
                </li>
                 <li class="chapter-item" data-chapter="chapter-3">
                    <a href="#chapter-3">3. Meio Biótico</a>
                    <ul class="subchapter-list">
                        <li class="subchapter-item"><a href="#sub-3-1" data-target="sub-3-1">3.1 Flora</a></li>
                        <li class="subchapter-item"><a href="#sub-3-2" data-target="sub-3-2">3.2 Fauna</a></li>
                    </ul>
                </li>
                 <li class="chapter-item" data-chapter="chapter-4">
                    <a href="#chapter-4">4. Meio Socioeconômico</a>
                    <ul class="subchapter-list">
                        <li class="subchapter-item"><a href="#sub-4-1" data-target="sub-4-1">4.1 Demografia</a></li>
                    </ul>
                </li>
                <li class="chapter-item" data-chapter="chapter-5">
                    <a href="#chapter-5">5. Análise Integrada</a>
                </li>
                <li class="chapter-item" data-chapter="chapter-6">
                    <a href="#chapter-6">6. Considerações Finais</a>
                </li>
            </ul>
        </nav>

        <main class="content-area">
            
            <section id="chapter-1" class="chapter-block">
                <h2 class="chapter-title">1. Introdução</h2>
                <div id="sub-1-1" class="subchapter-block">
                    <h3 class="subchapter-title">1.1 Caracterização do Empreendimento</h3>
                    <p>O projeto da Usina Hidrelétrica (UHE) Rio Forte visa o aproveitamento do potencial energético do Rio Forte, na bacia do Rio Doce, em Minas Gerais. Este relatório apresenta a análise de viabilidade ambiental do empreendimento.</p>
                    <p>Abaixo, um modelo 3D interativo ilustra a concepção da barragem e da casa de força. Utilize o mouse para rotacionar e explorar a estrutura.</p>
                    <div class="media-container video-container">
                        <iframe title="Hydroelectric Dam" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" allow="autoplay; fullscreen; xr-spatial-tracking" xr-spatial-tracking execution-while-out-of-viewport execution-while-not-rendered web-share src="https://sketchfab.com/models/b76544a034b248a8a48693d506d1f9a2/embed"></iframe>
                    </div>
                </div>
            </section>

            <section id="chapter-2" class="chapter-block">
                <h2 class="chapter-title">2. Meio Físico</h2>
                <div id="sub-2-2" class="subchapter-block">
                    <h3 class="subchapter-title">2.2 Geologia</h3>
                    <p>A área do projeto está inserida no Cráton do São Francisco, caracterizada por rochas do Supergrupo Espinhaço. O mapa abaixo exibe os pontos onde foram realizadas sondagens geológicas para análise do substrato rochoso.</p>
                    <div id="map-geologia" class="leaflet-map"></div>
                    <p>Os laudos completos das sondagens estão disponíveis para consulta.</p>
                    <a href="#" class="doc-link" onclick="alert('Isso abriria o documento PDF com o laudo geológico.')">Acessar Laudo Geológico (PDF)</a>
                </div>
                <div id="sub-2-3" class="subchapter-block">
                    <h3 class="subchapter-title">2.3 Geomorfologia</h3>
                    <p>O relevo da região é classificado como "Mares de Morros", com topos arredondados e vales encaixados. O vídeo abaixo, capturado por drone, oferece uma visão clara da geomorfologia local e do vale do Rio Forte.</p>
                    <div class="media-container video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/ghHe2T66a40?si=iX_yT8qY9-Q4uN6p" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
                </div>
                 <div id="sub-2-4" class="subchapter-block">
                    <h3 class="subchapter-title">2.4 Recursos Hídricos</h3>
                    <p>O monitoramento da qualidade da água foi realizado em 8 pontos estratégicos na Área de Influência Direta. O mapa exibe a localização dos pontos. Clique em um ponto para ver o Índice de Qualidade da Água (IQA) médio.</p>
                    <div id="map-hidrografia" class="leaflet-map"></div>
                </div>
            </section>

            <section id="chapter-3" class="chapter-block">
                <h2 class="chapter-title">3. Meio Biótico</h2>
                <div id="sub-3-1" class="subchapter-block">
                    <h3 class="subchapter-title">3.1 Flora</h3>
                    <p>O inventário florestal identificou três fitofisionomias principais na área do projeto. O mapa destaca as áreas de vegetação a serem suprimidas e as áreas de preservação permanente (APP) a serem conservadas.</p>
                    <div id="map-flora" class="leaflet-map"></div>
                </div>
                <div id="sub-3-2" class="subchapter-block">
                    <h3 class="subchapter-title">3.2 Fauna</h3>
                    <p>Foram registradas 120 espécies de aves na região. Uma espécie de destaque é o gavião-carcará (Caracara plancus), frequentemente avistado nas áreas de pastagem.</p>
                    <div class="media-container">
                        <img src="https://images.unsplash.com/photo-1613867042358-821e3381a54b?q=80&w=2070&auto=format&fit=crop" alt="Gavião Carcará">
                    </div>
                </div>
            </section>
            
            <section id="chapter-4" class="chapter-block">
                 <h2 class="chapter-title">4. Meio Socioeconômico</h2>
                 <div id="sub-4-1" class="subchapter-block">
                     <h3 class="subchapter-title">4.1 Demografia</h3>
                     <p>A população dos municípios na área de influência soma 45.000 habitantes, com 60% residindo na zona urbana. O gráfico abaixo ilustra a pirâmide etária da região, indicando uma população predominantemente jovem.</p>
                     <div class="media-container">
                         <img src="https://i.imgur.com/3ZkZJ6r.png" alt="Gráfico de Pirâmide Etária">
                     </div>
                 </div>
            </section>

             <section id="chapter-5" class="chapter-block">
                 <h2 class="chapter-title">5. Análise Integrada</h2>
                 <p>Esta seção consolida os diagnósticos dos meios físico, biótico e socioeconômico para avaliar a viabilidade ambiental do projeto de forma integrada, ponderando os impactos e os benefícios.</p>
            </section>
            
             <section id="chapter-6" class="chapter-block">
                 <h2 class="chapter-title">6. Considerações Finais</h2>
                 <p>Conclui-se que o empreendimento é viável, desde que as medidas mitigadoras e os programas ambientais propostos sejam rigorosamente implementados e monitorados. A geração de energia limpa e o desenvolvimento local são os principais benefícios esperados.</p>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- INICIALIZAÇÃO DOS MAPAS LEAFLET ---
            // Coordenada central para os mapas
            const centerCoord = [-19.91, -43.94];

            // 1. Basemaps (Camadas de Fundo)
            const osmTile = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            });
            const satelliteTile = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
            });

            // 2. Mapa de Geologia (sub-2-2)
            const mapGeologia = L.map('map-geologia').setView(centerCoord, 14);
            osmTile.addTo(mapGeologia);
            const geologiaPoints = [
                { lat: -19.915, lng: -43.945, name: "Sondagem SG-01" },
                { lat: -19.910, lng: -43.935, name: "Sondagem SG-02" },
                { lat: -19.918, lng: -43.930, name: "Sondagem SG-03" }
            ];
            geologiaPoints.forEach(p => {
                L.marker([p.lat, p.lng]).addTo(mapGeologia).bindPopup(`<b>${p.name}</b><br>Substrato: Gnaisse`);
            });

            // 3. Mapa de Hidrografia (sub-2-4)
            const mapHidrografia = L.map('map-hidrografia').setView(centerCoord, 13);
            satelliteTile.addTo(mapHidrografia);
            const aguaPoints = [
                { lat: -19.92, lng: -43.95, name: "Ponto P-01", iqa: 85 },
                { lat: -19.90, lng: -43.94, name: "Ponto P-02", iqa: 82 },
                { lat: -19.91, lng: -43.92, name: "Ponto P-03", iqa: 88 }
            ];
             aguaPoints.forEach(p => {
                L.circleMarker([p.lat, p.lng], { color: '#2980b9', radius: 8 }).addTo(mapHidrografia)
                 .bindPopup(`<b>${p.name}</b><br>IQA Médio: ${p.iqa} (Bom)`);
            });

            // 4. Mapa de Flora (sub-3-1)
            const mapFlora = L.map('map-flora').setView(centerCoord, 14);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { // Basemap minimalista
	            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
            }).addTo(mapFlora);
            // Área de supressão (polígono vermelho)
            const supressaoCoords = [ [-19.91, -43.95], [-19.915, -43.94], [-19.92, -43.95] ];
            L.polygon(supressaoCoords, { color: 'red' }).addTo(mapFlora).bindPopup('Área de Supressão Vegetal');
            // Área de APP (polígono verde)
            const appCoords = [ [-19.905, -43.93], [-19.908, -43.925], [-19.912, -43.935] ];
            L.polygon(appCoords, { color: 'green' }).addTo(mapFlora).bindPopup('Área de Preservação Permanente');

            
            // --- LÓGICA DE NAVEGAÇÃO E INTERATIVIDADE ---
            const navLinks = document.querySelectorAll('.table-of-contents a');
            const chapterItems = document.querySelectorAll('.chapter-item');
            
            // 1. Expandir/Recolher Capítulos
            chapterItems.forEach(item => {
                const link = item.querySelector('a');
                link.addEventListener('click', (e) => {
                    // Previne o scroll se o capítulo já estiver aberto
                    if (item.classList.contains('open')) {
                        e.preventDefault();
                    }
                    item.classList.toggle('open');
                });
            });

            // 2. Scroll Suave para as seções
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        e.preventDefault();
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // 3. Atualizar link ativo no menu conforme o scroll (Intersection Observer)
            const subchapterBlocks = document.querySelectorAll('.subchapter-block, .chapter-block');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const visibleId = entry.target.id;
                        
                        // Limpa todos os ativos
                        document.querySelectorAll('.table-of-contents a').forEach(a => a.classList.remove('active'));
                        chapterItems.forEach(ci => ci.querySelector('a').classList.remove('active'));

                        let targetLink = document.querySelector(`.table-of-contents a[href="#${visibleId}"]`) || document.querySelector(`.table-of-contents a[data-target="${visibleId}"]`);
                        
                        if (targetLink) {
                            targetLink.classList.add('active');
                            const parentChapter = targetLink.closest('.chapter-item');
                            if(parentChapter) {
                                parentChapter.querySelector('a').classList.add('active');
                                parentChapter.classList.add('open');
                            }
                        }
                    }
                });
            }, { rootMargin: "-40% 0px -60% 0px" }); // Ativa quando o elemento está na faixa central da tela

            subchapterBlocks.forEach(block => observer.observe(block));

        });
    </script>
</body>
</html>
